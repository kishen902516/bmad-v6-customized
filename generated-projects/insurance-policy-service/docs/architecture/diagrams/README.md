# Architecture Diagrams

This directory contains PlantUML diagrams documenting the architecture of the Insurance Policy Service.

## Diagrams

### 1. Component Diagram
**File**: `component-diagram.puml`

Shows the major components of the system and their relationships:
- Presentation layer components (Controllers)
- Application layer components (Services, DTOs)
- Domain layer components (Entities, Value Objects, Repository Ports)
- Infrastructure layer components (Adapters, JPA Entities, Mappers)
- Database

### 2. Layer Diagram
**File**: `layer-diagram.puml`

Illustrates the Clean Architecture layers and the dependency rule:
- Presentation Layer (REST Controllers)
- Application Layer (Use Cases)
- Domain Layer (Business Logic)
- Infrastructure Layer (Technical Implementation)

### 3. Entity Relationship Diagram
**File**: `entity-relationship-diagram.puml`

Database schema showing:
- Tables: policy, claim, payment, customer, coverage
- Primary keys, foreign keys, unique constraints
- Relationships between tables
- Indexes

### 4. Use Case Diagram
**File**: `use-case-diagram.puml`

Shows the use cases and actors:
- Actors: Customer, Claims Adjuster, Payment Processor, Admin
- Use cases: Create Policy, Submit Claim, Process Payment, etc.

### 5. Sequence Diagrams

**File**: `sequence-submit-claim.puml`
- Shows the flow for submitting a claim
- Illustrates interaction between layers
- Shows validation and business rule enforcement

**File**: `sequence-process-payment.puml`
- Shows the flow for processing a payment
- Demonstrates transaction boundaries
- Shows claim status update

## Viewing the Diagrams

### Option 1: Online PlantUML Viewer

1. Copy the content of a `.puml` file
2. Go to [PlantUML Web Server](http://www.plantuml.com/plantuml/uml/)
3. Paste the content
4. View the rendered diagram

### Option 2: VS Code Extension

1. Install the [PlantUML extension](https://marketplace.visualstudio.com/items?itemName=jebbs.plantuml)
2. Open a `.puml` file
3. Press `Alt+D` to preview

### Option 3: IntelliJ IDEA Plugin

1. Install the [PlantUML Integration plugin](https://plugins.jetbrains.com/plugin/7017-plantuml-integration)
2. Open a `.puml` file
3. View the rendered diagram in the right pane

### Option 4: Command Line

Install PlantUML:
```bash
# macOS
brew install plantuml

# Ubuntu/Debian
sudo apt-get install plantuml

# Windows (with Chocolatey)
choco install plantuml
```

Generate PNG images:
```bash
plantuml *.puml
```

This creates PNG files for all diagrams.

### Option 5: Docker

```bash
docker run -v $(pwd):/data plantuml/plantuml *.puml
```

## Exporting Diagrams

### To PNG
```bash
plantuml -tpng component-diagram.puml
```

### To SVG
```bash
plantuml -tsvg component-diagram.puml
```

### To PDF
```bash
plantuml -tpdf component-diagram.puml
```

## Updating Diagrams

When the architecture changes:

1. Update the relevant `.puml` file
2. Regenerate the diagram
3. Verify it reflects the current architecture
4. Commit both the `.puml` source and generated images (if applicable)

## Diagram Conventions

- **Colors**: Different layers use different background colors
  - Blue: Presentation Layer
  - Orange: Application Layer
  - Green: Domain Layer
  - Purple: Infrastructure Layer

- **Arrows**: Show dependencies
  - Solid arrows: Direct dependencies
  - Dashed arrows: Implementation/interface relationship

- **Notes**: Provide additional context and explanations

## Resources

- [PlantUML Documentation](https://plantuml.com/)
- [PlantUML Cheat Sheet](https://plantuml.com/guide)
- [Real World PlantUML](https://real-world-plantuml.com/)

---

Generated by BMAD Spring Boot Clean Architecture Generator
