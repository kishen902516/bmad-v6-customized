---
name: Add REST Endpoint
about: Add a new REST API endpoint
title: 'Add {{http_method}} {{endpoint_path}} endpoint'
labels: ['type:endpoint', 'layer:presentation', 'tdd', 'status:todo']
assignees: ''
---

## Endpoint Description

**HTTP Method:** {{http_method}}

**Path:** `{{endpoint_path}}`

**Purpose:** {{endpoint_purpose}}

**Layer:** Presentation ({{base_package}}.presentation.{{controller_name}})

## Requirements

### Request DTO
- [ ] Create immutable request DTO (Record)
- [ ] Add Jakarta Bean Validation
- [ ] Add OpenAPI annotations (@Schema)

### Response DTO
- [ ] Create immutable response DTO (Record)
- [ ] Map from use case output
- [ ] Add OpenAPI annotations

### REST Controller
- [ ] Add controller method with proper HTTP method
- [ ] Add OpenAPI documentation (@Operation, @ApiResponse)
- [ ] Implement request validation
- [ ] Call use case
- [ ] Return proper HTTP status codes
- [ ] Handle exceptions (use GlobalExceptionHandler)

### Exception Handling
- [ ] Update GlobalExceptionHandler if needed
- [ ] Add custom exceptions if needed
- [ ] Return consistent error responses

### Tests (TDD - Red-Green-Refactor)
- [ ] **RED**: Write failing controller tests (MockMvc)
- [ ] **RED**: Write failing Pact consumer test
- [ ] **GREEN**: Implement controller to pass tests
- [ ] **GREEN**: Verify Pact contract generated
- [ ] **REFACTOR**: Improve error handling and validation
- [ ] Run Pact provider verification

### Documentation
- [ ] OpenAPI spec generated correctly
- [ ] Swagger UI shows endpoint
- [ ] Example requests/responses documented

## Acceptance Criteria

- [ ] Endpoint follows RESTful conventions
- [ ] Proper HTTP status codes (200, 201, 400, 404, 500)
- [ ] Request validation works correctly
- [ ] OpenAPI documentation complete
- [ ] All tests pass (MockMvc + Pact)
- [ ] Pact contract verified by provider
- [ ] Error responses are consistent
- [ ] Code reviewed and approved

## TDD Workflow

This issue will follow Test-Driven Development:

1. **ðŸ”´ RED Phase**: Write failing MockMvc and Pact tests
2. **ðŸŸ¢ GREEN Phase**: Implement controller to pass tests
3. **ðŸ”µ REFACTOR Phase**: Improve error handling and documentation

## Dependencies

- **Use Case**: #{{use_case_issue}} (must be completed first)

## API Contract (OpenAPI)

```yaml
{{openapi_spec}}
```

## Example Request

```json
{{example_request}}
```

## Example Response

```json
{{example_response}}
```

## Branch

`feature/{{issue_number}}-add-{{endpoint_name_kebab}}-endpoint`

## Estimated Effort

{{estimated_hours}} hours

---

**Generated by BMAD Spring Boot Clean Architecture Generator**
